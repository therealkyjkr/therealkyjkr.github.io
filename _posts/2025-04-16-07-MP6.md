---
layout: post
title: "[λ§ν”„] Cortex-Mμ Registers λ° Special Registers μ •λ¦¬"
category: education
---

# π“ Cortex-Mμ Registers λ° Special Registers μ •λ¦¬

---

## β… 1. General-Purpose Registers (R0 ~ R12)

| μ΄λ¦„ | μ„¤λ… |
|------|------|
| `R0 ~ R12` | λ²”μ© 32λΉ„νΈ λ μ§€μ¤ν„° |
| `R0 ~ R7` | Low registers (16λΉ„νΈ λ…λ Ήμ–΄μ—μ„ μ ‘κ·Ό μ©μ΄) |
| `R8 ~ R12` | High registers (32λΉ„νΈ λ…λ Ήμ–΄ ν•„μ”) |

> μ‚°μ /λ…Όλ¦¬/μ΄λ™ μ—°μ‚° μ‹ μ£Όλ΅ μ‚¬μ©λ¨

---

## β… 2. Special Registers (νΉμ λ μ§€μ¤ν„°)

| μ΄λ¦„ | λ³„μΉ­ | μ„¤λ… |
|------|------|------|
| `R13` | SP (Stack Pointer) | μ¤νƒ ν¬μΈν„° (MSP λλ” PSP μ‚¬μ© κ°€λ¥) |
| `R14` | LR (Link Register) | ν•¨μ νΈμ¶ λ³µκ·€ μ£Όμ† μ €μ¥ |
| `R15` | PC (Program Counter) | λ‹¤μμ— μ‹¤ν–‰ν•  λ…λ Ήμ–΄ μ£Όμ† |

> **SPλ” CONTROL λ μ§€μ¤ν„°μ SPSEL λΉ„νΈλ΅ MSP/PSP μ„ νƒ κ°€λ¥**

---

## β… 3. Program Status Register (xPSR)

| κµ¬μ„± | μ΄λ¦„ | μ„¤λ… |
|------|------|------|
| [31:24] | APSR | μƒνƒ ν”λκ·Έ (N, Z, C, V λ“±) |
| [23:16] | EPSR | μ‹¤ν–‰ μƒνƒ μ •λ³΄ (Thumb, IT μƒνƒ λ“±) |
| [15:0] | IPSR | ν„μ¬ μμ™Έ λ²νΈ (0μ΄λ©΄ μμ™Έ μ—†μ) |

- `MRS`, `MSR` λ…λ Ήμ–΄λ΅ μ ‘κ·Ό κ°€λ¥ (λ‹¨, EPSRμ€ μ§μ ‘ μ ‘κ·Ό λ¶κ°€)

#### APSR μ£Όμ” ν”λκ·Έ

| ν”λκ·Έ | μλ―Έ |
|--------|------|
| `N` | Negative |
| `Z` | Zero |
| `C` | Carry |
| `V` | Overflow |

---

## β… 4. CONTROL λ μ§€μ¤ν„°

| λΉ„νΈ | μ΄λ¦„ | μ„¤λ… |
|------|------|------|
| [0] | nPRIV | 0 = Privileged, 1 = Unprivileged |
| [1] | SPSEL | 0 = MSP, 1 = PSP μ‚¬μ© |
| [2] | FPCA | FPU μ»¨ν…μ¤νΈ λ³΄μ΅΄ μ—¬λ¶€ (Cortex-M4 λ“±μ—μ„ μ‚¬μ©) |

- Thread modeμ—μ„λ§ μ„¤μ • κ°€λ¥
- `MRS CONTROL, Rx`, `MSR CONTROL, Rx` λλ” CMSIS API μ‚¬μ©

---

## β… 5. Interrupt Masking Registers (μΈν„°λ½νΈ λ§μ¤ν¬ λ μ§€μ¤ν„°)

| λ μ§€μ¤ν„° | ν¬κΈ° | μ ν¨ λΉ„νΈ | κΈ°λ¥ | νΉμ§• |
|----------|------|-----------|------|------|
| PRIMASK | 32λΉ„νΈ | Bit[0] | λ§μ¤ν¬ κ°€λ¥ν• λ¨λ“  μΈν„°λ½νΈ μ°¨λ‹¨ (NMI μ μ™Έ) | `CPSID i`, `CPSIE i` λ…λ Ή μ‚¬μ© |
| FAULTMASK | 32λΉ„νΈ | Bit[0] | λ¨λ“  μμ™Έ μ°¨λ‹¨ (HardFault ν¬ν•¨) | λ” κ°•λ ¥ν• λ§μ¤ν‚Ή |
| BASEPRI | 32λΉ„νΈ | Bit[7:N], N < 6 | Nλ³΄λ‹¤ λ‚®μ€ μ°μ„ μμ„μ μΈν„°λ½νΈ μ°¨λ‹¨ | κ°€μ¥ μ μ—°ν• μ΅°κ±΄λ¶€ λ§μ¤ν¬ |


## β… λ…λ Ήμ–΄ μ”μ•½ μμ‹

```asm
MRS R0, xPSR         ; μƒνƒ ν”λκ·Έ μ½κΈ°
MSR CONTROL, R0      ; νΉμ λ μ§€μ¤ν„° μ„¤μ •
CPSID i              ; μΈν„°λ½νΈ μ „μ²΄ λΉ„ν™μ„±ν™”
CPSIE i              ; μΈν„°λ½νΈ μ¬ν™μ„±ν™”
```