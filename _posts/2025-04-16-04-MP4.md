---
layout: post
title: "[마프] 메모리 정렬과 Endian"
category: education
---

# 📘 메모리 정렬(Alignment) & Endian 완전 정리 노트
---

## 📘 1. Endian이란?

Endian은 **데이터를 메모리에 어떤 순서로 저장하느냐**를 의미한다.  
가장 대표적인 두 가지:

- **Little-endian**: 작은 바이트(LSB)를 낮은 주소에 저장
- **Big-endian**: 큰 바이트(MSB)를 낮은 주소에 저장

---

## 📌 용어 구분 - 꼭 알아두자!

주소 하나는 1바이트를 가리키며, 1바이트 = 8비트 = 2자리 16진수

| 용어 | 의미 |
|------|------|
| **작은 바이트 (LSB)** | 숫자에서 덜 중요한 자리 (예: 0x78 in 0x12345678) |
| **큰 바이트 (MSB)** | 숫자에서 가장 중요한 자리 (예: 0x12 in 0x12345678) |
| **낮은 주소** | 메모리 공간에서 작은 주소값 (예: 0x00000000) |
| **높은 주소** | 메모리 공간에서 큰 주소값 (예: 0x00000003) |

> ✅ 리틀엔디안은: **작은 바이트를 낮은 주소에**  
> ✅ 빅엔디안은: **큰 바이트를 낮은 주소에**

---

## 🧪 예시: 0x12345678 저장

### Little-endian
```
주소  | 값
-------------
0x00  | 0x78  ← LSB
0x01  | 0x56
0x02  | 0x34
0x03  | 0x12  ← MSB
```

### Big-endian
```
주소  | 값
-------------
0x00  | 0x12  ← MSB
0x01  | 0x34
0x02  | 0x56
0x03  | 0x78  ← LSB
```

---

## 📐 2. 메모리 정렬 (Alignment)

어셈블리에서 `.word`, `.hword`, `.byte`와 `.align N` 등을 사용할 때  
**자료형마다 정렬 기준이 다름**. 올바른 정렬 없이는 오류가 나거나 성능이 떨어질 수 있음.

| 자료형 | 필요한 정렬 | 크기 |
|--------|-------------|------|
| `.byte` | 1바이트 정렬 | 1 |
| `.hword`| 2바이트 정렬 | 2 |
| `.word` | 4바이트 정렬 | 4 |

---

## 🧱 3. 전체 메모리 구조 개요 (스택 ~ 힙)
(낮은 주소부터)

| 영역 | 설명 |
|------|------|
| `.text` | 코드 (명령어) 저장 |
| `.data` | 초기값이 있는 전역/정적 변수 |
| `.bss` | 초기값 없는 전역/정적 변수 |
| `heap` | 동적 메모리 (malloc 등) |
| `stack` | 함수 호출 시 지역 변수 및 복귀 주소 저장 |

📌 스택은 **아래로 자라고**, 힙은 **위로 자람** → 중간은 미사용 영역

