---
layout: post
title: "[λ§ν”„] Cortex-Mμ λ¨λ“, μƒνƒ, μ ‘κ·Ό κ¶ν• μ„¤λ…"
category: education
---

# π“ Cortex-Mμ Operation Modes, States, Access Levels μ •λ¦¬
---

## β… 1. Execution Mode (μ‹¤ν–‰ λ¨λ“)

| λ¨λ“ | μ„¤λ… | μμ‹ μƒν™© |
|------|------|------------|
| **Thread Mode** | μΌλ° μ½”λ“ μ‹¤ν–‰ μ¤‘μΈ μƒνƒ | `main()` ν•¨μ, μ‚¬μ©μ μ• ν”λ¦¬μΌ€μ΄μ… |
| **Handler Mode** | μμ™Έ(μΈν„°λ½νΈ) μ²λ¦¬ μ¤‘ | μΈν„°λ½νΈ ν•Έλ“¤λ¬, SVC ν•Έλ“¤λ¬ λ“± |

### π”Ή μ „ν™ μ΅°κ±΄
- μΈν„°λ½νΈ λ°μƒ μ‹: **Thread β†’ Handler**
- μΈν„°λ½νΈ μΆ…λ£ μ‹: **Handler β†’ Thread** (μλ™ λ³µκ·€)

> Handler λ¨λ“λ” ν•­μƒ **Privileged + MSP** μƒνƒλ΅ μ§„μ…ν•λ‹¤.

---

## β… 2. Processor State (μƒνƒ)

| μƒνƒ | μ„¤λ… |
|------|------|
| **Thumb state** | Thumb λλ” Thumb-2 λ…λ Ήμ–΄ μ‹¤ν–‰ μ¤‘ (Cortex-Mμ€ Thumb μ „μ©) |
| **Debug state** | λ””λ²„κ±°μ— μν•΄ μ¤‘λ‹¨λ μƒνƒ (Breakpoint λ“±) |

- Thumb μƒνƒλ” λ…λ Ή μ‹¤ν–‰ μ‹ κΈ°λ³Έ μƒνƒ
- Debug μƒνƒλ” μ™Έλ¶€ λ””λ²„κΉ… μ„Έμ… μ¤‘μ—λ§ λ°μƒ

> Cortex-Mμ—λ” ARM μƒνƒκ°€ μ—†μ β†’ **ν•­μƒ Thumb μƒνƒλ§ μ‚¬μ©λ¨**

---

## β… 3. Access Level (μ ‘κ·Ό κ¶ν•)

| μμ¤€ | μ„¤λ… | μ μ© λ€μƒ |
|------|------|------------|
| **Privileged** | λ¨λ“  μ‹μ¤ν… λ¦¬μ†μ¤ μ ‘κ·Ό κ°€λ¥ | μ΄κΈ° μ‹¤ν–‰, μΈν„°λ½νΈ ν•Έλ“¤λ¬ |
| **Unprivileged** | μ ν•λ μ‹μ¤ν… λ¦¬μ†μ¤ μ ‘κ·Όλ§ ν—μ© | μ‚¬μ©μ μ•± μ½”λ“ |

### π”Ή κ¶ν• μ „ν™

| μ „ν™ λ°©ν–¥ | κ°€λ¥ μ—¬λ¶€ | μ„¤λ… |
|-----------|-----------|------|
| Privileged β†’ Unprivileged | β… κ°€λ¥ | Thread λ¨λ“μ—μ„ `CONTROL[0] = 1`λ΅ μ„¤μ • |
| Unprivileged β†’ Privileged | β μ§μ ‘ λ¶κ°€ | **Handler λ¨λ“ μ§„μ… μ‹ μλ™ λ³µκ·€** |

> μ¦‰, **Unprivileged μƒνƒμ μ½”λ“κ°€ κ¶ν•μ„ λ‹¤μ‹ μ¬λ¦¬λ ¤λ©΄ λ°λ“μ‹ μμ™Έ(Handler)λ¥Ό ν†µν•΄μ•Ό ν•λ‹¤.**  
μ΄λ” μ‹μ¤ν… λ³΄μ•κ³Ό μ•μ •μ„±μ„ μ„ν• μ„¤κ³„λ‹¤.

---

## π“ CONTROL λ μ§€μ¤ν„° κµ¬μ΅°

| λΉ„νΈ | μ΄λ¦„ | μλ―Έ |
|------|------|------|
| `CONTROL[0]` | nPRIV | 0 = Privileged, 1 = Unprivileged |
| `CONTROL[1]` | SPSEL | 0 = MSP, 1 = PSP μ‚¬μ© |

- Thread λ¨λ“μ—μ„λ§ CONTROL κ°’μ„ λ³€κ²½ κ°€λ¥
- Handler λ¨λ“λ” ν•­μƒ MSP + Privileged κ³ μ •

---

## π― μ‹¤ν–‰ κµ¬μ΅° μ”μ•½ νλ¦„

```text
1. λ¶€ν… β†’ Thread mode + Privileged + MSP
2. μ•± μ‹¤ν–‰ μ‹ β†’ CONTROL μ„¤μ • β†’ Unprivileged + PSP
3. μΈν„°λ½νΈ λ°μƒ β†’ Handler mode + Privileged + MSP
4. μΈν„°λ½νΈ μΆ…λ£ β†’ Thread mode + Unprivileged + PSP λ³µκ·€
```
